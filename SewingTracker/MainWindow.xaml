<Window x:Class="SewingTracker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SewingTracker.Converters"
        Title="Tailor Shop Monitor" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Converters -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <local:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
        <local:BoolToActiveConverter x:Key="BoolToActiveConverter"/>
        <local:BoolToColorConverter x:Key="BoolToColorConverter"/>
        <local:BitmapToImageSourceConverter x:Key="BitmapToImageSourceConverter"/>
    </Window.Resources>

    <Grid>
        <TabControl x:Name="MainTabControl">
            <TabItem Header="Work Scanning" Padding="10,5">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="20"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <TextBlock Grid.Row="0" Text="Work Completion Scanner" 
                              FontSize="24" FontWeight="Bold" 
                              HorizontalAlignment="Center"/>

                    <!-- Employee Barcode Section -->
                    <Border Grid.Row="2" BorderBrush="LightBlue" BorderThickness="1" 
                           CornerRadius="5" Padding="15" Background="AliceBlue">
                        <StackPanel>
                            <TextBlock Text="1. Scan Employee Barcode" FontWeight="Bold" FontSize="14"/>
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Text="{Binding EmployeeBarcode}" 
                                        FontSize="14" Padding="5" Margin="0,0,10,0"/>
                                <Button Grid.Column="1" Content="Scan Employee" 
                                       Command="{Binding ScanEmployeeBarcodeCommand}"
                                       Padding="15,5" Background="LightBlue"/>
                            </Grid>
                            <TextBlock Text="{Binding ScannedEmployee.Name, StringFormat='Employee: {0}'}" 
                                      Margin="0,5,0,0" FontWeight="Bold" 
                                      Visibility="{Binding ScannedEmployee, Converter={StaticResource NullToVisibilityConverter}}"/>
                        </StackPanel>
                    </Border>

                    <!-- Receipt Barcode Section -->
                    <Border Grid.Row="4" BorderBrush="LightGreen" BorderThickness="1" 
                           CornerRadius="5" Padding="15" Background="Honeydew">
                        <StackPanel>
                            <TextBlock Text="2. Scan Receipt Barcode" FontWeight="Bold" FontSize="14"/>
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" Text="{Binding ReceiptBarcode}" 
                                        FontSize="14" Padding="5" Margin="0,0,10,0"/>
                                <Button Grid.Column="1" Content="Scan Receipt" 
                                       Command="{Binding ScanReceiptBarcodeCommand}"
                                       Padding="15,5" Background="LightGreen"/>
                            </Grid>
                            <StackPanel Orientation="Vertical" Margin="0,5,0,0"
                                       Visibility="{Binding ScannedCloth, Converter={StaticResource NullToVisibilityConverter}}">
                                <TextBlock Text="{Binding ScannedCloth.ClothId, StringFormat='Cloth ID: {0}'}" FontWeight="Bold"/>
                                <TextBlock Text="{Binding ScannedCloth.Description, StringFormat='Description: {0}'}"/>
                                <TextBlock Text="{Binding ScannedCloth.Price, StringFormat='Price: ${0:F2}'}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Register Work Section -->
                    <Border Grid.Row="6" BorderBrush="Orange" BorderThickness="1" 
                           CornerRadius="5" Padding="15" Background="Cornsilk">
                        <StackPanel>
                            <TextBlock Text="3. Register Work Completion" FontWeight="Bold" FontSize="14"/>
                            <Grid Margin="0,10,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="1" Content="Register Work" 
                                       Command="{Binding RegisterWorkCommand}"
                                       Padding="20,8" Background="Orange" FontWeight="Bold"
                                       Margin="0,0,10,0"/>
                                <Button Grid.Column="2" Content="Clear" 
                                       Command="{Binding ClearCommand}"
                                       Padding="15,8" Background="LightGray"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Status Section -->
                    <Border Grid.Row="8" BorderBrush="Gray" BorderThickness="1" 
                           CornerRadius="5" Padding="15" Background="WhiteSmoke">
                        <StackPanel>
                            <TextBlock Text="Status:" FontWeight="Bold"/>
                            <TextBlock Text="{Binding StatusMessage}" 
                                      Foreground="{Binding StatusColor}"
                                      FontSize="14" Margin="0,5,0,0"/>
                            <ProgressBar IsIndeterminate="{Binding IsProcessing}" 
                                        Height="4" Margin="0,5,0,0"
                                        Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVisibilityConverter}}"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </TabItem>

            <TabItem Header="Employee Management" Padding="10,5">
                <Grid Margin="20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="3*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Left Panel - Employee List -->
                    <Border Grid.Column="0" BorderBrush="Gray" BorderThickness="1" 
                           CornerRadius="5" Padding="15">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="Employee Management" 
                                      FontSize="18" FontWeight="Bold"/>

                            <!-- Add Employee -->
                            <Border Grid.Row="2" BorderBrush="LightBlue" BorderThickness="1" 
                                   CornerRadius="3" Padding="10" Background="AliceBlue">
                                <StackPanel>
                                    <TextBlock Text="Add New Employee" FontWeight="Bold"/>
                                    <TextBox Text="{Binding NewEmployeeName}" 
                                            Margin="0,5,0,0" Padding="5"/>
                                    <Button Content="Add Employee" 
                                           Command="{Binding AddEmployeeCommand}"
                                           Margin="0,5,0,0" Padding="10,5" 
                                           Background="LightBlue"/>
                                </StackPanel>
                            </Border>

                            <!-- Employee List -->
                            <ListView Grid.Row="4" ItemsSource="{Binding Employees}" 
                                     SelectedItem="{Binding SelectedEmployee}"
                                     BorderBrush="LightGray" BorderThickness="1">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Name" Width="120"
                                                       DisplayMemberBinding="{Binding Name}"/>
                                        <GridViewColumn Header="Status" Width="80">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding IsActive, Converter={StaticResource BoolToActiveConverter}}"
                                                              Foreground="{Binding IsActive, Converter={StaticResource BoolToColorConverter}}"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                        <GridViewColumn Header="Created" Width="100" DisplayMemberBinding="{Binding CreatedDate}"/>
                                    </GridView>
                                </ListView.View>
                            </ListView>

                            <!-- Employee Actions -->
                            <StackPanel Grid.Row="6" Orientation="Horizontal">
                                <Button Content="Generate Barcode" 
                                       Command="{Binding GenerateBarcodeCommand}"
                                       Padding="10,5" Background="LightGreen"
                                       Margin="0,0,10,0"/>
                                <Button Content="Deactivate" 
                                       Command="{Binding DeactivateEmployeeCommand}"
                                       Padding="10,5" Background="LightCoral"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Right Panel - Barcode Display -->
                    <Border Grid.Column="2" BorderBrush="Gray" BorderThickness="1" 
                           CornerRadius="5" Padding="15">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="Employee Barcode" 
                                      FontSize="18" FontWeight="Bold"/>

                            <!-- Barcode Image -->
                            <Border Grid.Row="2" BorderBrush="LightGray" BorderThickness="1" 
                                   Background="White" HorizontalAlignment="Center" 
                                   VerticalAlignment="Center">
                                <Image Source="{Binding GeneratedBarcodeImage, Converter={StaticResource BitmapToImageSourceConverter}}" 
                                      Stretch="None" Margin="20"/>
                            </Border>

                            <!-- Selected Employee Info -->
                            <Border Grid.Row="4" BorderBrush="LightBlue" BorderThickness="1" 
                                   CornerRadius="3" Padding="10" Background="AliceBlue"
                                   Visibility="{Binding SelectedEmployee, Converter={StaticResource NullToVisibilityConverter}}">
                                <StackPanel>
                                    <TextBlock Text="Selected Employee:" FontWeight="Bold"/>
                                    <TextBlock Text="{Binding SelectedEmployee.Name, StringFormat='Name: {0}'}" Margin="0,2,0,0"/>
                                    <TextBlock Text="{Binding SelectedEmployee.CreatedDate, StringFormat='Created: {0:MM/dd/yyyy}'}" Margin="0,2,0,0"/>
                                    <TextBlock Text="{Binding SelectedEmployee.IsActive, StringFormat='Status: {0}', Converter={StaticResource BoolToActiveConverter}}" 
                                              Foreground="{Binding SelectedEmployee.IsActive, Converter={StaticResource BoolToColorConverter}}"
                                              Margin="0,2,0,0"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>